---
import Layout from '../../layouts/Layout.astro';
import { Image } from "astro:assets";
import '@/scss/history.scss';
import '@fontsource/zen-kaku-gothic-new';


const title = "";
const description = "";
const og_image = "";

import Fishbg from "@/assets/images/fish_bg.webp";
import Slide from "../../components/common/Slide.astro";

import { getHistory, getSlide } from "../../lib/microcms";
const response = await getHistory({ fields: ["id", "title","year","contents","ogimage"] });
const slideResponse = await getSlide({ fields: ["id", "images"] });
const slideImages = slideResponse.contents[0]?.images || [];

---

<Layout title={title} , description={description} og_image={og_image}>
    <main>

        <section id="History-top" class="p-History-top">
          <div>
            <h1 class="p-History-top__ttl">History</h1>
            <Image
              src={Fishbg}
                    alt={""}
              class="p-activities__fish-bg"
            />
            <div class="slidewrapper sp-none">
              <Slide images={slideImages} />
            </div>
            <p>
              竿友会は、釣りを愛する仲間たちが集まり、共に釣りの技術を磨きながら自然を楽しむことを目的として設立されました。創立以来、数多くの釣行やイベントを通じて、世代を超えた交流を大切にしながら活動を続けています。

              本ページでは、竿友会の歩んできた歴史を振り返り、これまでの活動や節目となった出来事を紹介します
            </p>
        </div>
        
        </section>
        <div class="p-timeline__fish-bg_wrapper">
        <Image
              src={Fishbg}
                    alt={""}
              class="p-timeline__fish-bg"
            />
        </div>
        <section class="p-timeline sp-none" id="timeline">
          <div class="l-container">
            <ul class="timeline-item_wrapper">
              {
          response.contents.map((history: any) => (
            <li class="timeline-item">
              <div class="line">
                <h2 class="timeline_ttl">{history.year}</h2>
              </div>
              <div class="timeline-content">
                <h3>{history.title}</h3>
                <p>{history.contents}</p>
              </div>
              <div class="timeline-image">
                <img src={history.ogimage?.url} style="width:175px; height:200px; object-fit: cover;">
              </div>
            </li>
          ))
        }
            <!-- <div class="buttonwrapper">
              <div class="button">
                <a class="text-[1.5rem]">View more</a>
              </div>
            </div> -->
        </ul>
        </div>
</section>
<section class="p-timeline-sp pc-none" id="timeline-sp">
  <div class="l-container">
    <ul class="timeline-sp-list">
      {
        response.contents.map((history: any) => (
          <li class="timeline-sp-item">
            <div class="timeline-sp-year">{history.year}</div>
            <div class="timeline-sp-content">
              <h3>{history.title}</h3>
              <p>{history.contents}</p>
              {history.ogimage?.url && (
                <img src={history.ogimage.url} alt={history.title} />
              )}
            </div>
          </li>
        ))
      }
    </ul>
  </div>
</section>

<style>
  .p-timeline-sp {
    background-color: #e6fbff;
    padding: 40px 0;
  }
  .timeline-sp-list {
    list-style: none;
    padding: 0 20px;
    margin: 0;
  }
  .timeline-sp-item {
    border-left: 3px solid #b0dfe7;
    padding-left: 20px;
    padding-bottom: 30px;
    position: relative;
  }
  .timeline-sp-item::before {
    content: "";
    position: absolute;
    left: -8px;
    top: 0;
    width: 13px;
    height: 13px;
    background: #b0dfe7;
    border-radius: 50%;
  }
  .timeline-sp-year {
    font-size: 20px;
    font-weight: 500;
    color: #378290;
    margin-bottom: 10px;
    text-decoration: underline;
    text-decoration-color: #b0dfe7;
    text-underline-offset: 4px;
  }
  .timeline-sp-content h3 {
    font-size: 18px;
    color: #378290;
    margin: 0 0 10px 0;
  }
  .timeline-sp-content p {
    font-size: 14px;
    line-height: 1.6;
    color: #444;
    margin: 0 0 15px 0;
  }
  .timeline-sp-content img {
    width: 100%;
    max-width: 250px;
    height: auto;
    border-radius: 4px;
  }
</style>

    </main>
</Layout>